---
title: Linee guida per la mitigazione Blazor delle minacce per ASP.NET Core Server
author: guardrex
description: Informazioni su come attenuare le minacce alla Blazor sicurezza per le app Server.
monikerRange: '>= aspnetcore-3.1'
ms.author: riande
ms.custom: mvc
ms.date: 05/05/2020
no-loc:
- Blazor
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: security/blazor/server/threat-mitigation
ms.openlocfilehash: 7c71da690efc0a515b289fd575173f2d3093d1c1
ms.sourcegitcommit: d4527df91f2c15bbe1cbf5a541adbea5747897aa
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 05/06/2020
ms.locfileid: "82852399"
---
# <a name="threat-mitigation-guidance-for-aspnet-core-blazor-server"></a><span data-ttu-id="781e8-103">Linee guida per la mitigazione delle minacce per ASP.NET Core Server Blazer</span><span class="sxs-lookup"><span data-stu-id="781e8-103">Threat mitigation guidance for ASP.NET Core Blazor Server</span></span>

<span data-ttu-id="781e8-104">Di [Javier Calvarro Nelson](https://github.com/javiercn)</span><span class="sxs-lookup"><span data-stu-id="781e8-104">By [Javier Calvarro Nelson](https://github.com/javiercn)</span></span>

<span data-ttu-id="781e8-105">Le app del server Blazer adottano un modello di elaborazione dati con *stato* , in cui il server e il client gestiscono una relazione di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="781e8-105">Blazor Server apps adopt a *stateful* data processing model, where the server and client maintain a long-lived relationship.</span></span> <span data-ttu-id="781e8-106">Lo stato persistente è gestito da un [circuito](xref:blazor/state-management), che può estendersi anche a una durata potenzialmente prolungata.</span><span class="sxs-lookup"><span data-stu-id="781e8-106">The persistent state is maintained by a [circuit](xref:blazor/state-management), which can span connections that are also potentially long-lived.</span></span>

<span data-ttu-id="781e8-107">Quando un utente visita un sito del server blazer, il server crea un circuito nella memoria del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-107">When a user visits a Blazor Server site, the server creates a circuit in the server's memory.</span></span> <span data-ttu-id="781e8-108">Il circuito indica al browser il contenuto di cui eseguire il rendering e risponde agli eventi, ad esempio quando l'utente seleziona un pulsante nell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-108">The circuit indicates to the browser what content to render and responds to events, such as when the user selects a button in the UI.</span></span> <span data-ttu-id="781e8-109">Per eseguire queste azioni, un circuito richiama le funzioni JavaScript nel browser dell'utente e nei metodi .NET sul server.</span><span class="sxs-lookup"><span data-stu-id="781e8-109">To perform these actions, a circuit invokes JavaScript functions in the user's browser and .NET methods on the server.</span></span> <span data-ttu-id="781e8-110">Questa interazione basata su JavaScript bidirezionale è detta interoperabilità [JavaScript (interoperabilità js)](xref:blazor/call-javascript-from-dotnet).</span><span class="sxs-lookup"><span data-stu-id="781e8-110">This two-way JavaScript-based interaction is referred to as [JavaScript interop (JS interop)](xref:blazor/call-javascript-from-dotnet).</span></span>

<span data-ttu-id="781e8-111">Poiché l'interoperabilità JS viene eseguita su Internet e il client usa un browser remoto, le app del server Blazer condividono la maggior parte dei problemi di sicurezza delle app Web.</span><span class="sxs-lookup"><span data-stu-id="781e8-111">Because JS interop occurs over the Internet and the client uses a remote browser, Blazor Server apps share most web app security concerns.</span></span> <span data-ttu-id="781e8-112">Questo argomento descrive le minacce comuni alle app del server blazer e fornisce indicazioni per la mitigazione delle minacce incentrate sulle app con connessione Internet.</span><span class="sxs-lookup"><span data-stu-id="781e8-112">This topic describes common threats to Blazor Server apps and provides threat mitigation guidance focused on Internet-facing apps.</span></span>

<span data-ttu-id="781e8-113">Negli ambienti vincolati, ad esempio all'interno di reti aziendali o Intranet, alcune delle linee guida per la mitigazione:</span><span class="sxs-lookup"><span data-stu-id="781e8-113">In constrained environments, such as inside corporate networks or intranets, some of the mitigation guidance either:</span></span>

* <span data-ttu-id="781e8-114">Non si applica nell'ambiente vincolato.</span><span class="sxs-lookup"><span data-stu-id="781e8-114">Doesn't apply in the constrained environment.</span></span>
* <span data-ttu-id="781e8-115">Non vale la pena di implementare perché il rischio per la sicurezza è ridotto in un ambiente vincolato.</span><span class="sxs-lookup"><span data-stu-id="781e8-115">Isn't worth the cost to implement because the security risk is low in a constrained environment.</span></span>

## <a name="blazor-and-shared-state"></a><span data-ttu-id="781e8-116">Blazer e stato condiviso</span><span class="sxs-lookup"><span data-stu-id="781e8-116">Blazor and shared state</span></span>

[!INCLUDE[](~/includes/blazor-security/blazor-shared-state.md)]

## <a name="resource-exhaustion"></a><span data-ttu-id="781e8-117">Esaurimento delle risorse</span><span class="sxs-lookup"><span data-stu-id="781e8-117">Resource exhaustion</span></span>

<span data-ttu-id="781e8-118">L'esaurimento delle risorse può verificarsi quando un client interagisce con il server e fa in modo che il server consumi risorse eccessive.</span><span class="sxs-lookup"><span data-stu-id="781e8-118">Resource exhaustion can occur when a client interacts with the server and causes the server to consume excessive resources.</span></span> <span data-ttu-id="781e8-119">Un utilizzo eccessivo delle risorse interessa principalmente:</span><span class="sxs-lookup"><span data-stu-id="781e8-119">Excessive resource consumption primarily affects:</span></span>

* [<span data-ttu-id="781e8-120">CPU</span><span class="sxs-lookup"><span data-stu-id="781e8-120">CPU</span></span>](#cpu)
* [<span data-ttu-id="781e8-121">Memoria</span><span class="sxs-lookup"><span data-stu-id="781e8-121">Memory</span></span>](#memory)
* [<span data-ttu-id="781e8-122">Connessioni client</span><span class="sxs-lookup"><span data-stu-id="781e8-122">Client connections</span></span>](#client-connections)

<span data-ttu-id="781e8-123">Gli attacchi Denial of Service (DoS) in genere cercano di esaurire le risorse di un'app o di un server.</span><span class="sxs-lookup"><span data-stu-id="781e8-123">Denial of service (DoS) attacks usually seek to exhaust an app or server's resources.</span></span> <span data-ttu-id="781e8-124">Tuttavia, l'esaurimento delle risorse non è necessariamente il risultato di un attacco al sistema.</span><span class="sxs-lookup"><span data-stu-id="781e8-124">However, resource exhaustion isn't necessarily the result of an attack on the system.</span></span> <span data-ttu-id="781e8-125">Ad esempio, le risorse finite possono essere esaurite a causa della richiesta di un utente elevato.</span><span class="sxs-lookup"><span data-stu-id="781e8-125">For example, finite resources can be exhausted due to high user demand.</span></span> <span data-ttu-id="781e8-126">Il DoS viene trattato ulteriormente nella sezione degli [attacchi Denial of Service (DOS)](#denial-of-service-dos-attacks) .</span><span class="sxs-lookup"><span data-stu-id="781e8-126">DoS is covered further in the [Denial of service (DoS) attacks](#denial-of-service-dos-attacks) section.</span></span>

<span data-ttu-id="781e8-127">Le risorse esterne al Framework di Blazer, ad esempio i database e gli handle di file, usati per leggere e scrivere file, possono anche riscontrare un esaurimento delle risorse.</span><span class="sxs-lookup"><span data-stu-id="781e8-127">Resources external to the Blazor framework, such as databases and file handles (used to read and write files), may also experience resource exhaustion.</span></span> <span data-ttu-id="781e8-128">Per altre informazioni, vedere <xref:performance/performance-best-practices>.</span><span class="sxs-lookup"><span data-stu-id="781e8-128">For more information, see <xref:performance/performance-best-practices>.</span></span>

### <a name="cpu"></a><span data-ttu-id="781e8-129">CPU</span><span class="sxs-lookup"><span data-stu-id="781e8-129">CPU</span></span>

<span data-ttu-id="781e8-130">L'esaurimento della CPU può verificarsi quando uno o più client forzano il server a eseguire un lavoro intensivo della CPU.</span><span class="sxs-lookup"><span data-stu-id="781e8-130">CPU exhaustion can occur when one or more clients force the server to perform intensive CPU work.</span></span>

<span data-ttu-id="781e8-131">Si consideri ad esempio un'app del server blazer che calcola un *numero Fibonnacci*.</span><span class="sxs-lookup"><span data-stu-id="781e8-131">For example, consider a Blazor Server app that calculates a *Fibonnacci number*.</span></span> <span data-ttu-id="781e8-132">Un numero Fibonnacci viene generato da una sequenza Fibonnacci, dove ogni numero nella sequenza corrisponde alla somma dei due numeri precedenti.</span><span class="sxs-lookup"><span data-stu-id="781e8-132">A Fibonnacci number is produced from a Fibonnacci sequence, where each number in the sequence is the sum of the two preceding numbers.</span></span> <span data-ttu-id="781e8-133">La quantità di lavoro necessaria per raggiungere la risposta dipende dalla lunghezza della sequenza e dalle dimensioni del valore iniziale.</span><span class="sxs-lookup"><span data-stu-id="781e8-133">The amount of work required to reach the answer depends on the length of the sequence and the size of the initial value.</span></span> <span data-ttu-id="781e8-134">Se l'app non inserisce limiti per la richiesta di un client, i calcoli con utilizzo intensivo della CPU possono dominare il tempo della CPU e diminuire le prestazioni di altre attività.</span><span class="sxs-lookup"><span data-stu-id="781e8-134">If the app doesn't place limits on a client's request, the CPU-intensive calculations may dominate the CPU's time and diminish the performance of other tasks.</span></span> <span data-ttu-id="781e8-135">Un utilizzo eccessivo delle risorse è un problema di sicurezza che influisca sulla disponibilità.</span><span class="sxs-lookup"><span data-stu-id="781e8-135">Excessive resource consumption is a security concern impacting availability.</span></span>

<span data-ttu-id="781e8-136">L'esaurimento della CPU è un problema per tutte le app pubbliche.</span><span class="sxs-lookup"><span data-stu-id="781e8-136">CPU exhaustion is a concern for all public-facing apps.</span></span> <span data-ttu-id="781e8-137">Nelle normali app Web, le richieste e le connessioni si assicurano come misure di sicurezza, ma le app del server Blazer non forniscono le stesse misure di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="781e8-137">In regular web apps, requests and connections time out as a safeguard, but Blazor Server apps don't provide the same safeguards.</span></span> <span data-ttu-id="781e8-138">Le app del server Blazer devono includere i controlli e i limiti appropriati prima di eseguire operazioni potenzialmente complesse per la CPU.</span><span class="sxs-lookup"><span data-stu-id="781e8-138">Blazor Server apps must include appropriate checks and limits before performing potentially CPU-intensive work.</span></span>

### <a name="memory"></a><span data-ttu-id="781e8-139">Memoria</span><span class="sxs-lookup"><span data-stu-id="781e8-139">Memory</span></span>

<span data-ttu-id="781e8-140">L'esaurimento della memoria può verificarsi quando uno o più client forzano l'utilizzo di una grande quantità di memoria da parte del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-140">Memory exhaustion can occur when one or more clients force the server to consume a large amount of memory.</span></span>

<span data-ttu-id="781e8-141">Si consideri, ad esempio, un'app del lato server Blazer con un componente che accetta e visualizza un elenco di elementi.</span><span class="sxs-lookup"><span data-stu-id="781e8-141">For example, consider a Blazor-server side app with a component that accepts and displays a list of items.</span></span> <span data-ttu-id="781e8-142">Se l'app Blazer non pone limiti al numero di elementi consentiti o al numero di elementi di cui è stato eseguito il rendering nel client, l'elaborazione e il rendering con utilizzo intensivo della memoria potrebbero dominare la memoria del server fino al punto in cui si verificano le prestazioni del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-142">If the Blazor app doesn't place limits on the number of items allowed or the number of items rendered back to the client, the memory-intensive processing and rendering may dominate the server's memory to the point where performance of the server suffers.</span></span> <span data-ttu-id="781e8-143">Il server potrebbe arrestarsi in modo anomalo o rallentare fino al momento in cui si è verificato un arresto anomalo.</span><span class="sxs-lookup"><span data-stu-id="781e8-143">The server may crash or slow to the point that it appears to have crashed.</span></span>

<span data-ttu-id="781e8-144">Si consideri lo scenario seguente per la gestione e la visualizzazione di un elenco di elementi relativi a un potenziale scenario di esaurimento della memoria nel server:</span><span class="sxs-lookup"><span data-stu-id="781e8-144">Consider the following scenario for maintaining and displaying a list of items that pertain to a potential memory exhaustion scenario on the server:</span></span>

* <span data-ttu-id="781e8-145">Gli elementi di una `List<MyItem>` proprietà o di un campo utilizzano la memoria del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-145">The items in a `List<MyItem>` property or field use the server's memory.</span></span> <span data-ttu-id="781e8-146">Se l'app consente di aumentare il limite dell'elenco di elementi, si rischia che il server esaurisca la memoria.</span><span class="sxs-lookup"><span data-stu-id="781e8-146">If the app allows the list of items to grow unbounded, there's a risk of the server running out of memory.</span></span> <span data-ttu-id="781e8-147">L'esaurimento della memoria causa la fine della sessione corrente (arresto anomalo) e tutte le sessioni simultanee in tale istanza del server ricevono un'eccezione di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="781e8-147">Running out of memory causes the current session to end (crash) and all of the concurrent sessions in that server instance receive an out-of-memory exception.</span></span> <span data-ttu-id="781e8-148">Per evitare che si verifichi questo scenario, l'app deve usare una struttura di dati che impone un limite di elementi per gli utenti simultanei.</span><span class="sxs-lookup"><span data-stu-id="781e8-148">To prevent this scenario from occurring, the app must use a data structure that imposes an item limit on concurrent users.</span></span>
* <span data-ttu-id="781e8-149">Se per il rendering non viene utilizzato uno schema di paging, il server utilizza memoria aggiuntiva per gli oggetti che non sono visibili nell'interfaccia utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-149">If a paging scheme isn't used for rendering, the server uses additional memory for objects that aren't visible in the UI.</span></span> <span data-ttu-id="781e8-150">Senza un limite al numero di elementi, le richieste di memoria potrebbero esaurire la memoria del server disponibile.</span><span class="sxs-lookup"><span data-stu-id="781e8-150">Without a limit on the number of items, memory demands may exhaust the available server memory.</span></span> <span data-ttu-id="781e8-151">Per evitare questo scenario, usare uno degli approcci seguenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-151">To prevent this scenario, use one of the following approaches:</span></span>
  * <span data-ttu-id="781e8-152">Usare elenchi impaginati durante il rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-152">Use paginated lists when rendering.</span></span>
  * <span data-ttu-id="781e8-153">Visualizza solo i primi 100 e 1.000 elementi e richiede all'utente di immettere i criteri di ricerca per trovare gli elementi oltre gli elementi visualizzati.</span><span class="sxs-lookup"><span data-stu-id="781e8-153">Only display the first 100 to 1,000 items and require the user to enter search criteria to find items beyond the items displayed.</span></span>
  * <span data-ttu-id="781e8-154">Per uno scenario di rendering più avanzato, implementare elenchi o griglie che supportano la *virtualizzazione*.</span><span class="sxs-lookup"><span data-stu-id="781e8-154">For a more advanced rendering scenario, implement lists or grids that support *virtualization*.</span></span> <span data-ttu-id="781e8-155">Con la virtualizzazione, gli elenchi eseguono solo il rendering di un subset di elementi attualmente visibili all'utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-155">Using virtualization, lists only render a subset of items currently visible to the user.</span></span> <span data-ttu-id="781e8-156">Quando l'utente interagisce con la barra di scorrimento nell'interfaccia utente, il componente esegue il rendering solo degli elementi necessari per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-156">When the user interacts with the scrollbar in the UI, the component renders only those items required for display.</span></span> <span data-ttu-id="781e8-157">Gli elementi che non sono attualmente necessari per la visualizzazione possono essere conservati nell'archiviazione secondaria, che è l'approccio ideale.</span><span class="sxs-lookup"><span data-stu-id="781e8-157">The items that aren't currently required for display can be held in secondary storage, which is the ideal approach.</span></span> <span data-ttu-id="781e8-158">Gli elementi non visualizzati possono anche essere mantenuti in memoria, il che è meno ideale.</span><span class="sxs-lookup"><span data-stu-id="781e8-158">Undisplayed items can also be held in memory, which is less ideal.</span></span>

<span data-ttu-id="781e8-159">Le app del server Blazer offrono un modello di programmazione simile ad altri Framework dell'interfaccia utente per le app con stato, ad esempio il webassembly WPF, Windows Forms o blazer.</span><span class="sxs-lookup"><span data-stu-id="781e8-159">Blazor Server apps offer a similar programming model to other UI frameworks for stateful apps, such as WPF, Windows Forms, or Blazor WebAssembly.</span></span> <span data-ttu-id="781e8-160">La differenza principale consiste nel fatto che in diversi framework dell'interfaccia utente la memoria utilizzata dall'app appartiene al client e ha effetto solo su tale client.</span><span class="sxs-lookup"><span data-stu-id="781e8-160">The main difference is that in several of the UI frameworks the memory consumed by the app belongs to the client and only affects that individual client.</span></span> <span data-ttu-id="781e8-161">Ad esempio, un'app webassembly Blazer viene eseguita interamente nel client e usa solo le risorse di memoria del client.</span><span class="sxs-lookup"><span data-stu-id="781e8-161">For example, a Blazor WebAssembly app runs entirely on the client and only uses client memory resources.</span></span> <span data-ttu-id="781e8-162">Nello scenario del server Blazer la memoria usata dall'app appartiene al server e viene condivisa tra i client nell'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-162">In the Blazor Server scenario, the memory consumed by the app belongs to the server and is shared among clients on the server instance.</span></span>

<span data-ttu-id="781e8-163">Le richieste di memoria sul lato server sono una considerazione per tutte le app del server blazer.</span><span class="sxs-lookup"><span data-stu-id="781e8-163">Server-side memory demands are a consideration for all Blazor Server apps.</span></span> <span data-ttu-id="781e8-164">Tuttavia, la maggior parte delle app Web sono senza stato e la memoria usata durante l'elaborazione di una richiesta viene rilasciata quando viene restituita la risposta.</span><span class="sxs-lookup"><span data-stu-id="781e8-164">However, most web apps are stateless, and the memory used while processing a request is released when the response is returned.</span></span> <span data-ttu-id="781e8-165">Come raccomandazione generale, non consentire ai client di allocare una quantità di memoria non associata come in qualsiasi altra app sul lato server che rende permanente le connessioni client.</span><span class="sxs-lookup"><span data-stu-id="781e8-165">As a general recommendation, don't permit clients to allocate an unbound amount of memory as in any other server-side app that persists client connections.</span></span> <span data-ttu-id="781e8-166">La memoria usata da un'app del server Blazer viene mantenute per un periodo di tempo più lungo rispetto a una singola richiesta.</span><span class="sxs-lookup"><span data-stu-id="781e8-166">The memory consumed by a Blazor Server app persists for a longer time than a single request.</span></span>

> [!NOTE]
> <span data-ttu-id="781e8-167">Durante lo sviluppo, è possibile utilizzare un profiler o una traccia acquisita per valutare le richieste di memoria dei client.</span><span class="sxs-lookup"><span data-stu-id="781e8-167">During development, a profiler can be used or a trace captured to assess memory demands of clients.</span></span> <span data-ttu-id="781e8-168">Un profiler o una traccia non acquisisce la memoria allocata a un client specifico.</span><span class="sxs-lookup"><span data-stu-id="781e8-168">A profiler or trace won't capture the memory allocated to a specific client.</span></span> <span data-ttu-id="781e8-169">Per acquisire l'utilizzo della memoria di un client specifico durante lo sviluppo, acquisire un dump ed esaminare la richiesta di memoria di tutti gli oggetti radice nel circuito di un utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-169">To capture the memory use of a specific client during development, capture a dump and examine the memory demand of all the objects rooted at a user's circuit.</span></span>

### <a name="client-connections"></a><span data-ttu-id="781e8-170">Connessioni client</span><span class="sxs-lookup"><span data-stu-id="781e8-170">Client connections</span></span>

<span data-ttu-id="781e8-171">L'esaurimento della connessione può verificarsi quando uno o più client aprono troppe connessioni simultanee al server, impedendo ad altri client di stabilire nuove connessioni.</span><span class="sxs-lookup"><span data-stu-id="781e8-171">Connection exhaustion can occur when one or more clients open too many concurrent connections to the server, preventing other clients from establishing new connections.</span></span>

<span data-ttu-id="781e8-172">I client Blazer stabiliscono una singola connessione per sessione e mantengono aperta la connessione per tutto il tempo in cui la finestra del browser è aperta.</span><span class="sxs-lookup"><span data-stu-id="781e8-172">Blazor clients establish a single connection per session and keep the connection open for as long as the browser window is open.</span></span> <span data-ttu-id="781e8-173">Le richieste sul server di gestione di tutte le connessioni non sono specifiche per le app blazer.</span><span class="sxs-lookup"><span data-stu-id="781e8-173">The demands on the server of maintaining all of the connections isn't specific to Blazor apps.</span></span> <span data-ttu-id="781e8-174">Data la natura persistente delle connessioni e la natura con stato delle app del server blazer, l'esaurimento della connessione costituisce un rischio maggiore per la disponibilità dell'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-174">Given the persistent nature of the connections and the stateful nature of Blazor Server apps, connection exhaustion is a greater risk to availability of the app.</span></span>

<span data-ttu-id="781e8-175">Per impostazione predefinita, non esiste alcun limite al numero di connessioni per utente per un'app del server blazer.</span><span class="sxs-lookup"><span data-stu-id="781e8-175">By default, there's no limit on the number of connections per user for a Blazor Server app.</span></span> <span data-ttu-id="781e8-176">Se l'app richiede un limite di connessione, adottare uno o più degli approcci seguenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-176">If the app requires a connection limit, take one or more of the following approaches:</span></span>

* <span data-ttu-id="781e8-177">Richiedere l'autenticazione, che limita naturalmente la capacità degli utenti non autorizzati di connettersi all'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-177">Require authentication, which naturally limits the ability of unauthorized users to connect to the app.</span></span> <span data-ttu-id="781e8-178">Affinché questo scenario sia efficace, è necessario impedire agli utenti di effettuare il provisioning di nuovi utenti in base a.</span><span class="sxs-lookup"><span data-stu-id="781e8-178">For this scenario to be effective, users must be prevented from provisioning new users at will.</span></span>
* <span data-ttu-id="781e8-179">Limitare il numero di connessioni per utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-179">Limit the number of connections per user.</span></span> <span data-ttu-id="781e8-180">La limitazione delle connessioni può essere eseguita tramite gli approcci seguenti.</span><span class="sxs-lookup"><span data-stu-id="781e8-180">Limiting connections can be accomplished via the following approaches.</span></span> <span data-ttu-id="781e8-181">Prestare attenzione a consentire agli utenti autorizzati di accedere all'app, ad esempio quando viene stabilito un limite di connessione in base all'indirizzo IP del client.</span><span class="sxs-lookup"><span data-stu-id="781e8-181">Exercise care to allow legitimate users to access the app (for example, when a connection limit is established based on the client's IP address).</span></span>
  * <span data-ttu-id="781e8-182">A livello di app:</span><span class="sxs-lookup"><span data-stu-id="781e8-182">At the app level:</span></span>
    * <span data-ttu-id="781e8-183">Estensibilità del routing dell'endpoint.</span><span class="sxs-lookup"><span data-stu-id="781e8-183">Endpoint routing extensibility.</span></span>
    * <span data-ttu-id="781e8-184">Richiedere l'autenticazione per la connessione all'app e per tenere traccia delle sessioni attive per ogni utente.</span><span class="sxs-lookup"><span data-stu-id="781e8-184">Require authentication to connect to the app and keep track of the active sessions per user.</span></span>
    * <span data-ttu-id="781e8-185">Rifiutare le nuove sessioni al raggiungimento di un limite.</span><span class="sxs-lookup"><span data-stu-id="781e8-185">Reject new sessions upon reaching a limit.</span></span>
    * <span data-ttu-id="781e8-186">Connessioni WebSocket proxy a un'app tramite l'uso di un proxy, ad esempio il [servizio Azure SignalR](/azure/azure-signalr/signalr-overview) che multiplexerà le connessioni dai client a un'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-186">Proxy WebSocket connections to an app through the use of a proxy, such as the [Azure SignalR Service](/azure/azure-signalr/signalr-overview) that multiplexes connections from clients to an app.</span></span> <span data-ttu-id="781e8-187">In questo modo si fornisce un'app con maggiore capacità di connessione rispetto a un singolo client che può stabilire, impedendo a un client di esaurire le connessioni al server.</span><span class="sxs-lookup"><span data-stu-id="781e8-187">This provides an app with greater connection capacity than a single client can establish, preventing a client from exhausting the connections to the server.</span></span>
  * <span data-ttu-id="781e8-188">A livello di server: usare un proxy/gateway davanti all'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-188">At the server level: Use a proxy/gateway in front of the app.</span></span> <span data-ttu-id="781e8-189">Ad esempio, la [porta anteriore di Azure](/azure/frontdoor/front-door-overview) consente di definire, gestire e monitorare il routing globale del traffico Web a un'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-189">For example, [Azure Front Door](/azure/frontdoor/front-door-overview) enables you to define, manage, and monitor the global routing of web traffic to an app.</span></span>

## <a name="denial-of-service-dos-attacks"></a><span data-ttu-id="781e8-190">Attacchi Denial of Service (DoS)</span><span class="sxs-lookup"><span data-stu-id="781e8-190">Denial of service (DoS) attacks</span></span>

<span data-ttu-id="781e8-191">Gli attacchi di tipo Denial of Service (DoS) coinvolgono un client che induce il server a esaurire una o più risorse rendendo l'app non disponibile.</span><span class="sxs-lookup"><span data-stu-id="781e8-191">Denial of service (DoS) attacks involve a client causing the server to exhaust one or more of its resources making the app unavailable.</span></span> <span data-ttu-id="781e8-192">Le app Server Blazer includono alcuni limiti predefiniti e si basano su altri limiti ASP.NET Core e SignalR per la protezione da attacchi DoS:</span><span class="sxs-lookup"><span data-stu-id="781e8-192">Blazor Server apps include some default limits and rely on other ASP.NET Core and SignalR limits to protect against DoS attacks:</span></span>

| <span data-ttu-id="781e8-193">Limite app Server Blazer</span><span class="sxs-lookup"><span data-stu-id="781e8-193">Blazor Server app limit</span></span>                            | <span data-ttu-id="781e8-194">Descrizione</span><span class="sxs-lookup"><span data-stu-id="781e8-194">Description</span></span> | <span data-ttu-id="781e8-195">Predefinito</span><span class="sxs-lookup"><span data-stu-id="781e8-195">Default</span></span> |
| ------------------------------------------------------- | ----------- | ------- |
| `CircuitOptions.DisconnectedCircuitMaxRetained`         | <span data-ttu-id="781e8-196">Numero massimo di circuiti disconnessi che un determinato server utilizza in memoria per volta.</span><span class="sxs-lookup"><span data-stu-id="781e8-196">Maximum number of disconnected circuits that a given server holds in memory at a time.</span></span> | <span data-ttu-id="781e8-197">100</span><span class="sxs-lookup"><span data-stu-id="781e8-197">100</span></span> |
| `CircuitOptions.DisconnectedCircuitRetentionPeriod`     | <span data-ttu-id="781e8-198">Quantità massima di tempo durante il quale un circuito disconnesso viene mantenuto in memoria prima di essere eliminato.</span><span class="sxs-lookup"><span data-stu-id="781e8-198">Maximum amount of time a disconnected circuit is held in memory before being torn down.</span></span> | <span data-ttu-id="781e8-199">3 minuti</span><span class="sxs-lookup"><span data-stu-id="781e8-199">3 minutes</span></span> |
| `CircuitOptions.JSInteropDefaultCallTimeout`            | <span data-ttu-id="781e8-200">Quantità massima di tempo di attesa del server prima del timeout di una chiamata asincrona alla funzione JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-200">Maximum amount of time the server waits before timing out an asynchronous JavaScript function invocation.</span></span> | <span data-ttu-id="781e8-201">1 minuto</span><span class="sxs-lookup"><span data-stu-id="781e8-201">1 minute</span></span> |
| `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches` | <span data-ttu-id="781e8-202">Numero massimo di batch di rendering non riconosciuti che il server mantiene in memoria per ogni circuito in un determinato momento per supportare una riconnessione affidabile.</span><span class="sxs-lookup"><span data-stu-id="781e8-202">Maximum number of unacknowledged render batches the server keeps in memory per circuit at a given time to support robust reconnection.</span></span> <span data-ttu-id="781e8-203">Dopo aver raggiunto il limite, il server smette di produrre nuovi batch di rendering finché uno o più batch non sono stati riconosciuti dal client.</span><span class="sxs-lookup"><span data-stu-id="781e8-203">After reaching the limit, the server stops producing new render batches until one or more batches have been acknowledged by the client.</span></span> | <span data-ttu-id="781e8-204">10</span><span class="sxs-lookup"><span data-stu-id="781e8-204">10</span></span> |


| <span data-ttu-id="781e8-205">SignalR e limite di ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="781e8-205">SignalR and ASP.NET Core limit</span></span>             | <span data-ttu-id="781e8-206">Descrizione</span><span class="sxs-lookup"><span data-stu-id="781e8-206">Description</span></span> | <span data-ttu-id="781e8-207">Predefinito</span><span class="sxs-lookup"><span data-stu-id="781e8-207">Default</span></span> |
| ------------------------------------------ | ----------- | ------- |
| `CircuitOptions.MaximumReceiveMessageSize` | <span data-ttu-id="781e8-208">Dimensioni del messaggio per un singolo messaggio.</span><span class="sxs-lookup"><span data-stu-id="781e8-208">Message size for an individual message.</span></span> | <span data-ttu-id="781e8-209">32 KB</span><span class="sxs-lookup"><span data-stu-id="781e8-209">32 KB</span></span> |

## <a name="interactions-with-the-browser-client"></a><span data-ttu-id="781e8-210">Interazioni con il browser (client)</span><span class="sxs-lookup"><span data-stu-id="781e8-210">Interactions with the browser (client)</span></span>

<span data-ttu-id="781e8-211">Un client interagisce con il server tramite l'invio di eventi di interoperabilità JS e il completamento del rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-211">A client interacts with the server through JS interop event dispatching and render completion.</span></span> <span data-ttu-id="781e8-212">La comunicazione di interoperabilità JS passa da JavaScript a .NET e viceversa:</span><span class="sxs-lookup"><span data-stu-id="781e8-212">JS interop communication goes both ways between JavaScript and .NET:</span></span>

* <span data-ttu-id="781e8-213">Gli eventi del browser vengono inviati dal client al server in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="781e8-213">Browser events are dispatched from the client to the server in an asynchronous fashion.</span></span>
* <span data-ttu-id="781e8-214">Il server risponde in modo asincrono al rendering dell'interfaccia utente, se necessario.</span><span class="sxs-lookup"><span data-stu-id="781e8-214">The server responds asynchronously rerendering the UI as necessary.</span></span>

### <a name="javascript-functions-invoked-from-net"></a><span data-ttu-id="781e8-215">Funzioni JavaScript richiamate da .NET</span><span class="sxs-lookup"><span data-stu-id="781e8-215">JavaScript functions invoked from .NET</span></span>

<span data-ttu-id="781e8-216">Per le chiamate da metodi .NET a JavaScript:</span><span class="sxs-lookup"><span data-stu-id="781e8-216">For calls from .NET methods to JavaScript:</span></span>

* <span data-ttu-id="781e8-217">Tutte le chiamate hanno un timeout configurabile dopo il quale hanno esito negativo <xref:System.OperationCanceledException> , restituendo un oggetto al chiamante.</span><span class="sxs-lookup"><span data-stu-id="781e8-217">All invocations have a configurable timeout after which they fail, returning a <xref:System.OperationCanceledException> to the caller.</span></span>
  * <span data-ttu-id="781e8-218">È previsto un timeout predefinito per le chiamate (`CircuitOptions.JSInteropDefaultCallTimeout`) di un minuto.</span><span class="sxs-lookup"><span data-stu-id="781e8-218">There's a default timeout for the calls (`CircuitOptions.JSInteropDefaultCallTimeout`) of one minute.</span></span> <span data-ttu-id="781e8-219">Per configurare questo limite, vedere <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls>.</span><span class="sxs-lookup"><span data-stu-id="781e8-219">To configure this limit, see <xref:blazor/call-javascript-from-dotnet#harden-js-interop-calls>.</span></span>
  * <span data-ttu-id="781e8-220">È possibile fornire un token di annullamento per controllare l'annullamento in base a ogni chiamata.</span><span class="sxs-lookup"><span data-stu-id="781e8-220">A cancellation token can be provided to control the cancellation on a per-call basis.</span></span> <span data-ttu-id="781e8-221">Si basano sul timeout di chiamata predefinito, dove possibile e con associazione temporale qualsiasi chiamata al client se viene fornito un token di annullamento.</span><span class="sxs-lookup"><span data-stu-id="781e8-221">Rely on the default call timeout where possible and time-bound any call to the client if a cancellation token is provided.</span></span>
* <span data-ttu-id="781e8-222">Il risultato di una chiamata JavaScript non può essere considerato attendibile.</span><span class="sxs-lookup"><span data-stu-id="781e8-222">The result of a JavaScript call can't be trusted.</span></span> <span data-ttu-id="781e8-223">Il Blazor client dell'app in esecuzione nel browser cerca la funzione JavaScript da richiamare.</span><span class="sxs-lookup"><span data-stu-id="781e8-223">The Blazor app client running in the browser searches for the JavaScript function to invoke.</span></span> <span data-ttu-id="781e8-224">La funzione viene richiamata e viene generato il risultato o un errore.</span><span class="sxs-lookup"><span data-stu-id="781e8-224">The function is invoked, and either the result or an error is produced.</span></span> <span data-ttu-id="781e8-225">Un client dannoso può tentare di eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-225">A malicious client can attempt to:</span></span>
  * <span data-ttu-id="781e8-226">Causa un problema nell'app restituendo un errore dalla funzione JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-226">Cause an issue in the app by returning an error from the JavaScript function.</span></span>
  * <span data-ttu-id="781e8-227">Indurre un comportamento imprevisto sul server restituendo un risultato imprevisto dalla funzione JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-227">Induce an unintended behavior on the server by returning an unexpected result from the JavaScript function.</span></span>

<span data-ttu-id="781e8-228">Adottare le seguenti precauzioni per evitare gli scenari precedenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-228">Take the following precautions to guard against the preceding scenarios:</span></span>

* <span data-ttu-id="781e8-229">Eseguire il wrapping delle chiamate di interoperabilità JS all'interno delle istruzioni [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) per tenere conto degli errori che potrebbero verificarsi durante la chiamata.</span><span class="sxs-lookup"><span data-stu-id="781e8-229">Wrap JS interop calls within [try-catch](/dotnet/csharp/language-reference/keywords/try-catch) statements to account for errors that might occur during the invocations.</span></span> <span data-ttu-id="781e8-230">Per altre informazioni, vedere <xref:blazor/handle-errors#javascript-interop>.</span><span class="sxs-lookup"><span data-stu-id="781e8-230">For more information, see <xref:blazor/handle-errors#javascript-interop>.</span></span>
* <span data-ttu-id="781e8-231">Convalidare i dati restituiti dalle chiamate di interoperabilità JS, inclusi i messaggi di errore, prima di intraprendere qualsiasi azione.</span><span class="sxs-lookup"><span data-stu-id="781e8-231">Validate data returned from JS interop invocations, including error messages, before taking any action.</span></span>

### <a name="net-methods-invoked-from-the-browser"></a><span data-ttu-id="781e8-232">Metodi .NET richiamati dal browser</span><span class="sxs-lookup"><span data-stu-id="781e8-232">.NET methods invoked from the browser</span></span>

<span data-ttu-id="781e8-233">Non considerare attendibili le chiamate da JavaScript ai metodi .NET.</span><span class="sxs-lookup"><span data-stu-id="781e8-233">Don't trust calls from JavaScript to .NET methods.</span></span> <span data-ttu-id="781e8-234">Quando un metodo .NET viene esposto a JavaScript, prendere in considerazione il modo in cui viene richiamato il metodo .NET:</span><span class="sxs-lookup"><span data-stu-id="781e8-234">When a .NET method is exposed to JavaScript, consider how the .NET method is invoked:</span></span>

* <span data-ttu-id="781e8-235">Considerare qualsiasi metodo .NET esposto a JavaScript come un endpoint pubblico per l'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-235">Treat any .NET method exposed to JavaScript as you would a public endpoint to the app.</span></span>
  * <span data-ttu-id="781e8-236">Convalida input.</span><span class="sxs-lookup"><span data-stu-id="781e8-236">Validate input.</span></span>
    * <span data-ttu-id="781e8-237">Verificare che i valori siano compresi negli intervalli previsti.</span><span class="sxs-lookup"><span data-stu-id="781e8-237">Ensure that values are within expected ranges.</span></span>
    * <span data-ttu-id="781e8-238">Verificare che l'utente disponga delle autorizzazioni necessarie per eseguire l'azione richiesta.</span><span class="sxs-lookup"><span data-stu-id="781e8-238">Ensure that the user has permission to perform the action requested.</span></span>
  * <span data-ttu-id="781e8-239">Non allocare una quantità eccessiva di risorse come parte della chiamata al metodo .NET.</span><span class="sxs-lookup"><span data-stu-id="781e8-239">Don't allocate an excessive quantity of resources as part of the .NET method invocation.</span></span> <span data-ttu-id="781e8-240">Eseguire ad esempio i controlli e i limiti di utilizzo della CPU e della memoria.</span><span class="sxs-lookup"><span data-stu-id="781e8-240">For example, perform checks and place limits on CPU and memory use.</span></span>
  * <span data-ttu-id="781e8-241">Tenere presente che i metodi statici e di istanza possono essere esposti ai client JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-241">Take into account that static and instance methods can be exposed to JavaScript clients.</span></span> <span data-ttu-id="781e8-242">Evitare di condividere lo stato tra le sessioni a meno che la progettazione non chiami per lo stato di condivisione con vincoli appropriati.</span><span class="sxs-lookup"><span data-stu-id="781e8-242">Avoid sharing state across sessions unless the design calls for sharing state with appropriate constraints.</span></span>
    * <span data-ttu-id="781e8-243">Per i metodi di istanza `DotNetReference` esposti tramite oggetti creati in origine tramite l'inserimento di dipendenze, gli oggetti devono essere registrati come oggetti con ambito.</span><span class="sxs-lookup"><span data-stu-id="781e8-243">For instance methods exposed through `DotNetReference` objects that are originally created through dependency injection (DI), the objects should be registered as scoped objects.</span></span> <span data-ttu-id="781e8-244">Si applica a qualsiasi servizio DI DI cui Blazor l'app server USA.</span><span class="sxs-lookup"><span data-stu-id="781e8-244">This applies to any DI service that the Blazor Server app uses.</span></span>
    * <span data-ttu-id="781e8-245">Per i metodi statici, evitare di stabilire uno stato che non può essere definito come ambito del client a meno che l'app non condivida in modo esplicito lo stato in base alla progettazione per tutti gli utenti in un'istanza del server.</span><span class="sxs-lookup"><span data-stu-id="781e8-245">For static methods, avoid establishing state that can't be scoped to the client unless the app is explicitly sharing state by-design across all users on a server instance.</span></span>
  * <span data-ttu-id="781e8-246">Evitare di passare i dati forniti dall'utente nei parametri alle chiamate JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-246">Avoid passing user-supplied data in parameters to JavaScript calls.</span></span> <span data-ttu-id="781e8-247">Se il passaggio dei dati nei parametri è assolutamente necessario, assicurarsi che il codice JavaScript gestisca il passaggio dei dati senza introdurre vulnerabilità di [Scripting (XSS) tra siti](#cross-site-scripting-xss) .</span><span class="sxs-lookup"><span data-stu-id="781e8-247">If passing data in parameters is absolutely required, ensure that the JavaScript code handles passing the data without introducing [Cross-site scripting (XSS)](#cross-site-scripting-xss) vulnerabilities.</span></span> <span data-ttu-id="781e8-248">Ad esempio, non scrivere dati specificati dall'utente nel Document Object Model (DOM) impostando la `innerHTML` proprietà di un elemento.</span><span class="sxs-lookup"><span data-stu-id="781e8-248">For example, don't write user-supplied data to the Document Object Model (DOM) by setting the `innerHTML` property of an element.</span></span> <span data-ttu-id="781e8-249">Provare a usare i [criteri di sicurezza del contenuto (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) per disabilitare `eval` e altre primitive JavaScript non sicure.</span><span class="sxs-lookup"><span data-stu-id="781e8-249">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to disable `eval` and other unsafe JavaScript primitives.</span></span>
* <span data-ttu-id="781e8-250">Evitare di implementare l'invio personalizzato delle chiamate .NET all'implementazione dell'invio del Framework.</span><span class="sxs-lookup"><span data-stu-id="781e8-250">Avoid implementing custom dispatching of .NET invocations on top of the framework's dispatching implementation.</span></span> <span data-ttu-id="781e8-251">L'esposizione di metodi .NET al browser è uno scenario avanzato, non consigliato per lo Blazor sviluppo generale.</span><span class="sxs-lookup"><span data-stu-id="781e8-251">Exposing .NET methods to the browser is an advanced scenario, not recommended for general Blazor development.</span></span>

### <a name="events"></a><span data-ttu-id="781e8-252">Eventi</span><span class="sxs-lookup"><span data-stu-id="781e8-252">Events</span></span>

<span data-ttu-id="781e8-253">Gli eventi forniscono un punto di ingresso Blazor a un'app Server.</span><span class="sxs-lookup"><span data-stu-id="781e8-253">Events provide an entry point to a Blazor Server app.</span></span> <span data-ttu-id="781e8-254">Le stesse regole per la salvaguardia degli endpoint nelle app Web si applicano alla Blazor gestione degli eventi nelle app Server.</span><span class="sxs-lookup"><span data-stu-id="781e8-254">The same rules for safeguarding endpoints in web apps apply to event handling in Blazor Server apps.</span></span> <span data-ttu-id="781e8-255">Un client dannoso può inviare tutti i dati che desidera inviare come payload per un evento.</span><span class="sxs-lookup"><span data-stu-id="781e8-255">A malicious client can send any data it wishes to send as the payload for an event.</span></span>

<span data-ttu-id="781e8-256">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="781e8-256">For example:</span></span>

* <span data-ttu-id="781e8-257">Un evento di modifica per `<select>` un può inviare un valore che non rientra nelle opzioni presentate dall'app al client.</span><span class="sxs-lookup"><span data-stu-id="781e8-257">A change event for a `<select>` could send a value that isn't within the options that the app presented to the client.</span></span>
* <span data-ttu-id="781e8-258">Un `<input>` oggetto può inviare dati di testo al server, ignorando la convalida lato client.</span><span class="sxs-lookup"><span data-stu-id="781e8-258">An `<input>` could send any text data to the server, bypassing client-side validation.</span></span>

<span data-ttu-id="781e8-259">L'app deve convalidare i dati per qualsiasi evento gestito dall'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-259">The app must validate the data for any event that the app handles.</span></span> <span data-ttu-id="781e8-260">I Blazor [componenti dei moduli](xref:blazor/forms-validation) del Framework eseguono convalide di base.</span><span class="sxs-lookup"><span data-stu-id="781e8-260">The Blazor framework [forms components](xref:blazor/forms-validation) perform basic validations.</span></span> <span data-ttu-id="781e8-261">Se l'app usa componenti dei moduli personalizzati, è necessario scrivere codice personalizzato per convalidare i dati degli eventi in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="781e8-261">If the app uses custom forms components, custom code must be written to validate event data as appropriate.</span></span>

Blazor<span data-ttu-id="781e8-262">Gli eventi del server sono asincroni, quindi è possibile inviare più eventi al server prima che l'app abbia tempo per rispondere producendo un nuovo rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-262"> Server events are asynchronous, so multiple events can be dispatched to the server before the app has time to react by producing a new render.</span></span> <span data-ttu-id="781e8-263">Questo ha alcune implicazioni sulla sicurezza da prendere in considerazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-263">This has some security implications to consider.</span></span> <span data-ttu-id="781e8-264">La limitazione delle azioni client nell'app deve essere eseguita all'interno di gestori eventi e non dipende dallo stato di visualizzazione di cui è stato eseguito il rendering corrente.</span><span class="sxs-lookup"><span data-stu-id="781e8-264">Limiting client actions in the app must be performed inside event handlers and not depend on the current rendered view state.</span></span>

<span data-ttu-id="781e8-265">Si consideri un componente contatore che deve consentire a un utente di incrementare un contatore un massimo di tre volte.</span><span class="sxs-lookup"><span data-stu-id="781e8-265">Consider a counter component that should allow a user to increment a counter a maximum of three times.</span></span> <span data-ttu-id="781e8-266">Il pulsante per incrementare il contatore è in modo condizionale in base `count`al valore di:</span><span class="sxs-lookup"><span data-stu-id="781e8-266">The button to increment the counter is conditionally based on the value of `count`:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        count++;
    }
}
```

<span data-ttu-id="781e8-267">Un client può inviare uno o più eventi di incremento prima che il Framework produca un nuovo rendering di questo componente.</span><span class="sxs-lookup"><span data-stu-id="781e8-267">A client can dispatch one or more increment events before the framework produces a new render of this component.</span></span> <span data-ttu-id="781e8-268">Il risultato è che `count` può essere incrementato di *tre volte* dall'utente perché il pulsante non viene rimosso dall'interfaccia utente abbastanza rapidamente.</span><span class="sxs-lookup"><span data-stu-id="781e8-268">The result is that the `count` can be incremented *over three times* by the user because the button isn't removed by the UI quickly enough.</span></span> <span data-ttu-id="781e8-269">Il modo corretto per raggiungere il limite di tre `count` incrementi è illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="781e8-269">The correct way to achieve the limit of three `count` increments is shown in the following example:</span></span>

```razor
<p>Count: @count<p>

@if (count < 3)
{
    <button @onclick="IncrementCount" value="Increment count" />
}

@code 
{
    private int count = 0;

    private void IncrementCount()
    {
        if (count < 3)
        {
            count++;
        }
    }
}
```

<span data-ttu-id="781e8-270">Aggiungendo il `if (count < 3) { ... }` controllo all'interno del gestore, la decisione di incremento `count` si basa sullo stato corrente dell'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-270">By adding the `if (count < 3) { ... }` check inside the handler, the decision to increment `count` is based on the current app state.</span></span> <span data-ttu-id="781e8-271">La decisione non è basata sullo stato dell'interfaccia utente come nell'esempio precedente, che potrebbe essere temporaneamente obsoleto.</span><span class="sxs-lookup"><span data-stu-id="781e8-271">The decision isn't based on the state of the UI as it was in the previous example, which might be temporarily stale.</span></span>

### <a name="guard-against-multiple-dispatches"></a><span data-ttu-id="781e8-272">Protezione da più invii</span><span class="sxs-lookup"><span data-stu-id="781e8-272">Guard against multiple dispatches</span></span>

<span data-ttu-id="781e8-273">Se un callback di evento richiama un'operazione a esecuzione prolungata in modo asincrono, ad esempio il recupero di dati da un servizio o da un database esterno, provare a usare un GUARD.</span><span class="sxs-lookup"><span data-stu-id="781e8-273">If an event callback invokes a long running operation asynchronously, such as fetching data from an external service or database, consider using a guard.</span></span> <span data-ttu-id="781e8-274">Il Guard può impedire all'utente di accodare più operazioni mentre è in corso l'operazione con commenti visivi.</span><span class="sxs-lookup"><span data-stu-id="781e8-274">The guard can prevent the user from queueing up multiple operations while the operation is in progress with visual feedback.</span></span> <span data-ttu-id="781e8-275">Il codice componente seguente imposta `isLoading` su `true` mentre `GetForecastAsync` ottiene i dati dal server.</span><span class="sxs-lookup"><span data-stu-id="781e8-275">The following component code sets `isLoading` to `true` while `GetForecastAsync` obtains data from the server.</span></span> <span data-ttu-id="781e8-276">Mentre `isLoading` è `true`, il pulsante è disabilitato nell'interfaccia utente:</span><span class="sxs-lookup"><span data-stu-id="781e8-276">While `isLoading` is `true`, the button is disabled in the UI:</span></span>

```razor
@page "/fetchdata"
@using BlazorServerSample.Data
@inject WeatherForecastService ForecastService

<button disabled="@isLoading" @onclick="UpdateForecasts">Update</button>

@code {
    private bool isLoading;
    private WeatherForecast[] forecasts;

    private async Task UpdateForecasts()
    {
        if (!isLoading)
        {
            isLoading = true;
            forecasts = await ForecastService.GetForecastAsync(DateTime.Now);
            isLoading = false;
        }
    }
}
```

<span data-ttu-id="781e8-277">Il modello Guard illustrato nell'esempio precedente funziona se l'operazione in background viene eseguita in modo asincrono con `async` - `await` il modello.</span><span class="sxs-lookup"><span data-stu-id="781e8-277">The guard pattern demonstrated in the preceding example works if the background operation is executed asynchronously with the `async`-`await` pattern.</span></span>

### <a name="cancel-early-and-avoid-use-after-dispose"></a><span data-ttu-id="781e8-278">Annulla anticipatamente ed evita l'uso di After-Dispose</span><span class="sxs-lookup"><span data-stu-id="781e8-278">Cancel early and avoid use-after-dispose</span></span>

<span data-ttu-id="781e8-279">Oltre a usare un GUARD come descritto nella sezione [Guard da più invii](#guard-against-multiple-dispatches) , provare a usare un <xref:System.Threading.CancellationToken> per annullare le operazioni a esecuzione prolungata quando il componente viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="781e8-279">In addition to using a guard as described in the [Guard against multiple dispatches](#guard-against-multiple-dispatches) section, consider using a <xref:System.Threading.CancellationToken> to cancel long-running operations when the component is disposed.</span></span> <span data-ttu-id="781e8-280">Questo approccio offre il vantaggio aggiuntivo di evitare *use-after-Dispose* nei componenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-280">This approach has the added benefit of avoiding *use-after-dispose* in components:</span></span>

```razor
@implements IDisposable

...

@code {
    private readonly CancellationTokenSource TokenSource = 
        new CancellationTokenSource();

    private async Task UpdateForecasts()
    {
        ...

        forecasts = await ForecastService.GetForecastAsync(DateTime.Now, 
            TokenSource.Token);

        if (TokenSource.Token.IsCancellationRequested)
        {
           return;
        }

        ...
    }

    public void Dispose()
    {
        TokenSource.Cancel();
    }
}
```

### <a name="avoid-events-that-produce-large-amounts-of-data"></a><span data-ttu-id="781e8-281">Evitare eventi che producono grandi quantità di dati</span><span class="sxs-lookup"><span data-stu-id="781e8-281">Avoid events that produce large amounts of data</span></span>

<span data-ttu-id="781e8-282">Alcuni eventi DOM, ad esempio `oninput` o `onscroll`, possono produrre una grande quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="781e8-282">Some DOM events, such as `oninput` or `onscroll`, can produce a large amount of data.</span></span> <span data-ttu-id="781e8-283">Evitare di usare questi eventi Blazor nelle app Server.</span><span class="sxs-lookup"><span data-stu-id="781e8-283">Avoid using these events in Blazor server apps.</span></span>

## <a name="additional-security-guidance"></a><span data-ttu-id="781e8-284">Ulteriori indicazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="781e8-284">Additional security guidance</span></span>

<span data-ttu-id="781e8-285">Le linee guida per la protezione delle app ASP.NET Core Blazor si applicano alle app Server e vengono descritte nelle sezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-285">The guidance for securing ASP.NET Core apps apply to Blazor Server apps and are covered in the following sections:</span></span>

* [<span data-ttu-id="781e8-286">Registrazione e dati sensibili</span><span class="sxs-lookup"><span data-stu-id="781e8-286">Logging and sensitive data</span></span>](#logging-and-sensitive-data)
* [<span data-ttu-id="781e8-287">Proteggere le informazioni in transito con HTTPS</span><span class="sxs-lookup"><span data-stu-id="781e8-287">Protect information in transit with HTTPS</span></span>](#protect-information-in-transit-with-https)
* [<span data-ttu-id="781e8-288">Scripting tra siti (XSS)</span><span class="sxs-lookup"><span data-stu-id="781e8-288">Cross-site scripting (XSS)</span></span>](#cross-site-scripting-xss)
* [<span data-ttu-id="781e8-289">Protezione tra le origini</span><span class="sxs-lookup"><span data-stu-id="781e8-289">Cross-origin protection</span></span>](#cross-origin-protection)
* [<span data-ttu-id="781e8-290">Clic su jacking</span><span class="sxs-lookup"><span data-stu-id="781e8-290">Click-jacking</span></span>](#click-jacking)
* [<span data-ttu-id="781e8-291">Reindirizzamenti aperti</span><span class="sxs-lookup"><span data-stu-id="781e8-291">Open redirects</span></span>](#open-redirects)

### <a name="logging-and-sensitive-data"></a><span data-ttu-id="781e8-292">Registrazione e dati sensibili</span><span class="sxs-lookup"><span data-stu-id="781e8-292">Logging and sensitive data</span></span>

<span data-ttu-id="781e8-293">Le interazioni di interoperabilità JS tra il client e il server vengono registrate nei <xref:Microsoft.Extensions.Logging.ILogger> log del server con le istanze.</span><span class="sxs-lookup"><span data-stu-id="781e8-293">JS interop interactions between the client and server are recorded in the server's logs with <xref:Microsoft.Extensions.Logging.ILogger> instances.</span></span> Blazor<span data-ttu-id="781e8-294">evita la registrazione di informazioni riservate, ad esempio gli eventi effettivi o gli input e gli output di interoperabilità JS.</span><span class="sxs-lookup"><span data-stu-id="781e8-294"> avoids logging sensitive information, such as actual events or JS interop inputs and outputs.</span></span>

<span data-ttu-id="781e8-295">Quando si verifica un errore nel server, il framework invia una notifica al client e rimuove la sessione.</span><span class="sxs-lookup"><span data-stu-id="781e8-295">When an error occurs on the server, the framework notifies the client and tears down the session.</span></span> <span data-ttu-id="781e8-296">Per impostazione predefinita, il client riceve un messaggio di errore generico che può essere visualizzato negli strumenti di sviluppo del browser.</span><span class="sxs-lookup"><span data-stu-id="781e8-296">By default, the client receives a generic error message that can be seen in the browser's developer tools.</span></span>

<span data-ttu-id="781e8-297">L'errore sul lato client non include il stack e non fornisce dettagli sulla ragione dell'errore, ma i log del server contengono tali informazioni.</span><span class="sxs-lookup"><span data-stu-id="781e8-297">The client-side error doesn't include the callstack and doesn't provide detail on the cause of the error, but server logs do contain such information.</span></span> <span data-ttu-id="781e8-298">A scopo di sviluppo, le informazioni sensibili sugli errori possono essere rese disponibili al client abilitando errori dettagliati.</span><span class="sxs-lookup"><span data-stu-id="781e8-298">For development purposes, sensitive error information can be made available to the client by enabling detailed errors.</span></span>

<span data-ttu-id="781e8-299">Abilitare gli errori dettagliati con:</span><span class="sxs-lookup"><span data-stu-id="781e8-299">Enable detailed errors with:</span></span>

* <span data-ttu-id="781e8-300">`CircuitOptions.DetailedErrors`.</span><span class="sxs-lookup"><span data-stu-id="781e8-300">`CircuitOptions.DetailedErrors`.</span></span>
* <span data-ttu-id="781e8-301">`DetailedErrors`chiave di configurazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-301">`DetailedErrors` configuration key.</span></span> <span data-ttu-id="781e8-302">Ad esempio, impostare la `ASPNETCORE_DETAILEDERRORS` variabile di ambiente su un valore `true`di.</span><span class="sxs-lookup"><span data-stu-id="781e8-302">For example, set the `ASPNETCORE_DETAILEDERRORS` environment variable to a value of `true`.</span></span>

> [!WARNING]
> <span data-ttu-id="781e8-303">L'esposizione delle informazioni sugli errori ai client su Internet costituisce un rischio per la sicurezza che deve essere sempre evitata.</span><span class="sxs-lookup"><span data-stu-id="781e8-303">Exposing error information to clients on the Internet is a security risk that should always be avoided.</span></span>

### <a name="protect-information-in-transit-with-https"></a><span data-ttu-id="781e8-304">Proteggere le informazioni in transito con HTTPS</span><span class="sxs-lookup"><span data-stu-id="781e8-304">Protect information in transit with HTTPS</span></span>

Blazor<span data-ttu-id="781e8-305">Il server SignalR utilizza per la comunicazione tra il client e il server.</span><span class="sxs-lookup"><span data-stu-id="781e8-305"> Server uses SignalR for communication between the client and the server.</span></span> Blazor<span data-ttu-id="781e8-306">Il server utilizza normalmente il trasporto SignalR che negozia, che in genere è WebSocket.</span><span class="sxs-lookup"><span data-stu-id="781e8-306"> Server normally uses the transport that SignalR negotiates, which is typically WebSockets.</span></span>

Blazor<span data-ttu-id="781e8-307">Il server non garantisce l'integrità e la riservatezza dei dati inviati tra il server e il client.</span><span class="sxs-lookup"><span data-stu-id="781e8-307"> Server doesn't ensure the integrity and confidentiality of the data sent between the server and the client.</span></span> <span data-ttu-id="781e8-308">Usare sempre HTTPS.</span><span class="sxs-lookup"><span data-stu-id="781e8-308">Always use HTTPS.</span></span>

### <a name="cross-site-scripting-xss"></a><span data-ttu-id="781e8-309">Scripting tra siti (XSS)</span><span class="sxs-lookup"><span data-stu-id="781e8-309">Cross-site scripting (XSS)</span></span>

<span data-ttu-id="781e8-310">Il cross-site scripting (XSS) consente a un'entità non autorizzata di eseguire logica arbitraria nel contesto del browser.</span><span class="sxs-lookup"><span data-stu-id="781e8-310">Cross-site scripting (XSS) allows an unauthorized party to execute arbitrary logic in the context of the browser.</span></span> <span data-ttu-id="781e8-311">Un'app compromessa potrebbe potenzialmente eseguire codice arbitrario nel client.</span><span class="sxs-lookup"><span data-stu-id="781e8-311">A compromised app could potentially run arbitrary code on the client.</span></span> <span data-ttu-id="781e8-312">La vulnerabilità può essere utilizzata per eseguire potenzialmente una serie di azioni dannose sul server:</span><span class="sxs-lookup"><span data-stu-id="781e8-312">The vulnerability could be used to potentially perform a number of malicious actions against the server:</span></span>

* <span data-ttu-id="781e8-313">Inviare eventi Fake/non validi al server.</span><span class="sxs-lookup"><span data-stu-id="781e8-313">Dispatch fake/invalid events to the server.</span></span>
* <span data-ttu-id="781e8-314">Completamenti di rendering non riusciti/non validi.</span><span class="sxs-lookup"><span data-stu-id="781e8-314">Dispatch fail/invalid render completions.</span></span>
* <span data-ttu-id="781e8-315">Evitare di inviare i completamenti di rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-315">Avoid dispatching render completions.</span></span>
* <span data-ttu-id="781e8-316">Invia le chiamate di interoperabilità da JavaScript a .NET.</span><span class="sxs-lookup"><span data-stu-id="781e8-316">Dispatch interop calls from JavaScript to .NET.</span></span>
* <span data-ttu-id="781e8-317">Modificare la risposta delle chiamate di interoperabilità da .NET a JavaScript.</span><span class="sxs-lookup"><span data-stu-id="781e8-317">Modify the response of interop calls from .NET to JavaScript.</span></span>
* <span data-ttu-id="781e8-318">Evitare di inviare i risultati di interoperabilità da .NET a JS.</span><span class="sxs-lookup"><span data-stu-id="781e8-318">Avoid dispatching .NET to JS interop results.</span></span>

<span data-ttu-id="781e8-319">Il Blazor Framework Server esegue le operazioni per la protezione da alcune delle minacce precedenti:</span><span class="sxs-lookup"><span data-stu-id="781e8-319">The Blazor Server framework takes steps to protect against some of the preceding threats:</span></span>

* <span data-ttu-id="781e8-320">Interrompe la produzione di nuovi aggiornamenti dell'interfaccia utente se il client non riconosce i batch di rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-320">Stops producing new UI updates if the client isn't acknowledging render batches.</span></span> <span data-ttu-id="781e8-321">Configurato con `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches`.</span><span class="sxs-lookup"><span data-stu-id="781e8-321">Configured with `CircuitOptions.MaxBufferedUnacknowledgedRenderBatches`.</span></span>
* <span data-ttu-id="781e8-322">Timeout di qualsiasi chiamata da .NET a JavaScript dopo un minuto senza ricevere una risposta dal client.</span><span class="sxs-lookup"><span data-stu-id="781e8-322">Times out any .NET to JavaScript call after one minute without receiving a response from the client.</span></span> <span data-ttu-id="781e8-323">Configurato con `CircuitOptions.JSInteropDefaultCallTimeout`.</span><span class="sxs-lookup"><span data-stu-id="781e8-323">Configured with `CircuitOptions.JSInteropDefaultCallTimeout`.</span></span>
* <span data-ttu-id="781e8-324">Esegue la convalida di base per tutti gli input provenienti dal browser durante l'interoperabilità JS:</span><span class="sxs-lookup"><span data-stu-id="781e8-324">Performs basic validation on all input coming from the browser during JS interop:</span></span>
  * <span data-ttu-id="781e8-325">I riferimenti .NET sono validi e del tipo previsto dal metodo .NET.</span><span class="sxs-lookup"><span data-stu-id="781e8-325">.NET references are valid and of the type expected by the .NET method.</span></span>
  * <span data-ttu-id="781e8-326">I dati non sono in formato non corretto.</span><span class="sxs-lookup"><span data-stu-id="781e8-326">The data isn't malformed.</span></span>
  * <span data-ttu-id="781e8-327">Il numero corretto di argomenti per il metodo è presente nel payload.</span><span class="sxs-lookup"><span data-stu-id="781e8-327">The correct number of arguments for the method are present in the payload.</span></span>
  * <span data-ttu-id="781e8-328">Gli argomenti o i risultati possono essere deserializzati correttamente prima di richiamare il metodo.</span><span class="sxs-lookup"><span data-stu-id="781e8-328">The arguments or result can be deserialized correctly before invoking the method.</span></span>
* <span data-ttu-id="781e8-329">Esegue la convalida di base in tutti gli input provenienti dal browser dagli eventi inviati:</span><span class="sxs-lookup"><span data-stu-id="781e8-329">Performs basic validation in all input coming from the browser from dispatched events:</span></span>
  * <span data-ttu-id="781e8-330">Il tipo dell'evento è valido.</span><span class="sxs-lookup"><span data-stu-id="781e8-330">The event has a valid type.</span></span>
  * <span data-ttu-id="781e8-331">I dati per l'evento possono essere deserializzati.</span><span class="sxs-lookup"><span data-stu-id="781e8-331">The data for the event can be deserialized.</span></span>
  * <span data-ttu-id="781e8-332">All'evento è associato un gestore eventi.</span><span class="sxs-lookup"><span data-stu-id="781e8-332">There's an event handler associated with the event.</span></span>

<span data-ttu-id="781e8-333">Oltre alle misure di sicurezza implementate dal Framework, l'app deve essere codificata dallo sviluppatore per proteggersi dalle minacce e intraprendere le azioni appropriate:</span><span class="sxs-lookup"><span data-stu-id="781e8-333">In addition to the safeguards that the framework implements, the app must be coded by the developer to safeguard against threats and take appropriate actions:</span></span>

* <span data-ttu-id="781e8-334">Convalidare sempre i dati durante la gestione degli eventi.</span><span class="sxs-lookup"><span data-stu-id="781e8-334">Always validate data when handling events.</span></span>
* <span data-ttu-id="781e8-335">Eseguire le azioni appropriate alla ricezione di dati non validi:</span><span class="sxs-lookup"><span data-stu-id="781e8-335">Take appropriate action upon receiving invalid data:</span></span>
  * <span data-ttu-id="781e8-336">Ignorare i dati e restituire.</span><span class="sxs-lookup"><span data-stu-id="781e8-336">Ignore the data and return.</span></span> <span data-ttu-id="781e8-337">Ciò consente all'app di continuare l'elaborazione delle richieste.</span><span class="sxs-lookup"><span data-stu-id="781e8-337">This allows the app to continue processing requests.</span></span>
  * <span data-ttu-id="781e8-338">Se l'app determina che l'input è illegittimo e non può essere prodotto da client legittimo, generare un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="781e8-338">If the app determines that the input is illegitimate and couldn't be produced by legitimate client, throw an exception.</span></span> <span data-ttu-id="781e8-339">La generazione di un'eccezione rimuove il circuito e termina la sessione.</span><span class="sxs-lookup"><span data-stu-id="781e8-339">Throwing an exception tears down the circuit and ends the session.</span></span>
* <span data-ttu-id="781e8-340">Non considerare attendibile il messaggio di errore fornito dai completamenti dei batch di rendering inclusi nei log.</span><span class="sxs-lookup"><span data-stu-id="781e8-340">Don't trust the error message provided by render batch completions included in the logs.</span></span> <span data-ttu-id="781e8-341">L'errore viene fornito dal client e in genere non può essere considerato attendibile, perché il client potrebbe essere compromesso.</span><span class="sxs-lookup"><span data-stu-id="781e8-341">The error is provided by the client and can't generally be trusted, as the client might be compromised.</span></span>
* <span data-ttu-id="781e8-342">Non considerare attendibile l'input sulle chiamate di interoperabilità JS in entrambe le direzioni tra i metodi JavaScript e .NET.</span><span class="sxs-lookup"><span data-stu-id="781e8-342">Don't trust the input on JS interop calls in either direction between JavaScript and .NET methods.</span></span>
* <span data-ttu-id="781e8-343">L'app è responsabile della convalida della validità del contenuto di argomenti e risultati, anche se gli argomenti o i risultati vengono deserializzati correttamente.</span><span class="sxs-lookup"><span data-stu-id="781e8-343">The app is responsible for validating that the content of arguments and results are valid, even if the arguments or results are correctly deserialized.</span></span>

<span data-ttu-id="781e8-344">Per poter esistere una vulnerabilità XSS, l'app deve incorporare l'input dell'utente nella pagina di cui è stato eseguito il rendering.</span><span class="sxs-lookup"><span data-stu-id="781e8-344">For a XSS vulnerability to exist, the app must incorporate user input in the rendered page.</span></span> Blazor<span data-ttu-id="781e8-345">I componenti server eseguono un passaggio in fase di compilazione, in cui il markup in un file *Razor* viene trasformato in logica C# procedurale.</span><span class="sxs-lookup"><span data-stu-id="781e8-345"> Server components execute a compile-time step where the markup in a *.razor* file is transformed into procedural C# logic.</span></span> <span data-ttu-id="781e8-346">In fase di esecuzione, la logica C# compila un *albero di rendering* che descrive gli elementi, il testo e i componenti figlio.</span><span class="sxs-lookup"><span data-stu-id="781e8-346">At runtime, the C# logic builds a *render tree* describing the elements, text, and child components.</span></span> <span data-ttu-id="781e8-347">Viene applicato al DOM del browser tramite una sequenza di istruzioni JavaScript (o viene serializzato in HTML in caso di prerendering):</span><span class="sxs-lookup"><span data-stu-id="781e8-347">This is applied to the browser's DOM via a sequence of JavaScript instructions (or is serialized to HTML in the case of prerendering):</span></span>

* <span data-ttu-id="781e8-348">L'input dell'utente di Razor cui è stato eseguito il `@someStringValue`rendering tramite la sintassi normale (ad esempio Razor ,) non espone una vulnerabilità XSS perché la sintassi viene aggiunta al Dom tramite comandi che possono scrivere solo testo.</span><span class="sxs-lookup"><span data-stu-id="781e8-348">User input rendered via normal Razor syntax (for example, `@someStringValue`) doesn't expose a XSS vulnerability because the Razor syntax is added to the DOM via commands that can only write text.</span></span> <span data-ttu-id="781e8-349">Anche se il valore include il markup HTML, il valore viene visualizzato come testo statico.</span><span class="sxs-lookup"><span data-stu-id="781e8-349">Even if the value includes HTML markup, the value is displayed as static text.</span></span> <span data-ttu-id="781e8-350">Quando si esegue il prerendering, l'output è codificato in formato HTML, che visualizza anche il contenuto come testo statico.</span><span class="sxs-lookup"><span data-stu-id="781e8-350">When prerendering, the output is HTML-encoded, which also displays the content as static text.</span></span>
* <span data-ttu-id="781e8-351">I tag di script non sono consentiti e non devono essere inclusi nell'albero di rendering del componente dell'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-351">Script tags aren't allowed and shouldn't be included in the app's component render tree.</span></span> <span data-ttu-id="781e8-352">Se un tag di script è incluso nel markup di un componente, viene generato un errore in fase di compilazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-352">If a script tag is included in a component's markup, a compile-time error is generated.</span></span>
* <span data-ttu-id="781e8-353">Gli autori dei componenti possono creare componenti in C# Razorsenza usare.</span><span class="sxs-lookup"><span data-stu-id="781e8-353">Component authors can author components in C# without using Razor.</span></span> <span data-ttu-id="781e8-354">L'autore del componente è responsabile dell'uso delle API corrette durante la creazione dell'output.</span><span class="sxs-lookup"><span data-stu-id="781e8-354">The component author is responsible for using the correct APIs when emitting output.</span></span> <span data-ttu-id="781e8-355">Usare `builder.AddContent(0, someUserSuppliedString)` , ad esempio, e *non* `builder.AddMarkupContent(0, someUserSuppliedString)`, perché quest'ultimo potrebbe creare una vulnerabilità XSS.</span><span class="sxs-lookup"><span data-stu-id="781e8-355">For example, use `builder.AddContent(0, someUserSuppliedString)` and *not* `builder.AddMarkupContent(0, someUserSuppliedString)`, as the latter could create a XSS vulnerability.</span></span>

<span data-ttu-id="781e8-356">Come parte della protezione da attacchi XSS, valutare la possibilità di implementare mitigazioni XSS, ad esempio i [criteri di sicurezza del contenuto (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span><span class="sxs-lookup"><span data-stu-id="781e8-356">As part of protecting against XSS attacks, consider implementing XSS mitigations, such as [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP).</span></span>

<span data-ttu-id="781e8-357">Per altre informazioni, vedere <xref:security/cross-site-scripting>.</span><span class="sxs-lookup"><span data-stu-id="781e8-357">For more information, see <xref:security/cross-site-scripting>.</span></span>

### <a name="cross-origin-protection"></a><span data-ttu-id="781e8-358">Protezione tra le origini</span><span class="sxs-lookup"><span data-stu-id="781e8-358">Cross-origin protection</span></span>

<span data-ttu-id="781e8-359">Gli attacchi tra le origini coinvolgono un client di un'origine diversa che esegue un'azione sul server.</span><span class="sxs-lookup"><span data-stu-id="781e8-359">Cross-origin attacks involve a client from a different origin performing an action against the server.</span></span> <span data-ttu-id="781e8-360">L'azione dannosa è in genere una richiesta GET o un modulo POST (richiesta tra siti falsa, CSRF), ma è anche possibile aprire un WebSocket dannoso.</span><span class="sxs-lookup"><span data-stu-id="781e8-360">The malicious action is typically a GET request or a form POST (Cross-Site Request Forgery, CSRF), but opening a malicious WebSocket is also possible.</span></span> Blazor<span data-ttu-id="781e8-361">Le app Server offrono [le stesse garanzie che qualsiasi SignalR altra app che usa l'offerta del protocollo Hub](xref:signalr/security):</span><span class="sxs-lookup"><span data-stu-id="781e8-361"> Server apps offer [the same guarantees that any other SignalR app using the hub protocol offer](xref:signalr/security):</span></span>

* Blazor<span data-ttu-id="781e8-362">È possibile accedere alle app Server tra le origini, a meno che non vengano adottate misure aggiuntive per impedirlo.</span><span class="sxs-lookup"><span data-stu-id="781e8-362"> Server apps can be accessed cross-origin unless additional measures are taken to prevent it.</span></span> <span data-ttu-id="781e8-363">Per disabilitare l'accesso tra le origini, disabilitare CORS nell'endpoint aggiungendo il middleware CORS alla pipeline e aggiungendo `DisableCorsAttribute` ai metadati dell' Blazor endpoint o limitare il set di origini consentite [configurando SignalR per la condivisione di risorse tra](xref:signalr/security#cross-origin-resource-sharing)le origini.</span><span class="sxs-lookup"><span data-stu-id="781e8-363">To disable cross-origin access, either disable CORS in the endpoint by adding the CORS middleware to the pipeline and adding the `DisableCorsAttribute` to the Blazor endpoint metadata or limit the set of allowed origins by [configuring SignalR for cross-origin resource sharing](xref:signalr/security#cross-origin-resource-sharing).</span></span>
* <span data-ttu-id="781e8-364">Se CORS è abilitato, potrebbero essere necessari passaggi aggiuntivi per proteggere l'app a seconda della configurazione di CORS.</span><span class="sxs-lookup"><span data-stu-id="781e8-364">If CORS is enabled, extra steps might be required to protect the app depending on the CORS configuration.</span></span> <span data-ttu-id="781e8-365">Se CORS è abilitata a livello globale, CORS può essere disabilitato per l' Blazor Hub server `DisableCorsAttribute` aggiungendo i metadati ai metadati dell'endpoint `hub.MapBlazorHub()`dopo la chiamata a.</span><span class="sxs-lookup"><span data-stu-id="781e8-365">If CORS is globally enabled, CORS can be disabled for the Blazor Server hub by adding the `DisableCorsAttribute` metadata to the endpoint metadata after calling `hub.MapBlazorHub()`.</span></span>

<span data-ttu-id="781e8-366">Per altre informazioni, vedere <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="781e8-366">For more information, see <xref:security/anti-request-forgery>.</span></span>

### <a name="click-jacking"></a><span data-ttu-id="781e8-367">Clic su jacking</span><span class="sxs-lookup"><span data-stu-id="781e8-367">Click-jacking</span></span>

<span data-ttu-id="781e8-368">Il click-Jack prevede il rendering di un sito `<iframe>` come all'interno di un sito da un'origine diversa per consentire all'utente di eseguire azioni sul sito sotto attacco.</span><span class="sxs-lookup"><span data-stu-id="781e8-368">Click-jacking involves rendering a site as an `<iframe>` inside a site from a different origin in order to trick the user into performing actions on the site under attack.</span></span>

<span data-ttu-id="781e8-369">Per proteggere un'app dal rendering all'interno di `<iframe>`un, usare i [criteri di sicurezza del contenuto (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) e l' `X-Frame-Options` intestazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-369">To protect an app from rendering inside of an `<iframe>`, use [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) and the `X-Frame-Options` header.</span></span> <span data-ttu-id="781e8-370">Per ulteriori informazioni, vedere la pagina relativa alla [documentazione Web MDN: X-frame-options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span><span class="sxs-lookup"><span data-stu-id="781e8-370">For more information, see [MDN web docs: X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options).</span></span>

### <a name="open-redirects"></a><span data-ttu-id="781e8-371">Reindirizzamenti aperti</span><span class="sxs-lookup"><span data-stu-id="781e8-371">Open redirects</span></span>

<span data-ttu-id="781e8-372">Quando viene Blazor avviata una sessione dell'applicazione server, il server esegue la convalida di base degli URL inviati come parte dell'avvio della sessione.</span><span class="sxs-lookup"><span data-stu-id="781e8-372">When a Blazor Server app session starts, the server performs basic validation of the URLs sent as part of starting the session.</span></span> <span data-ttu-id="781e8-373">Il Framework verifica che l'URL di base sia un elemento padre dell'URL corrente prima di stabilire il circuito.</span><span class="sxs-lookup"><span data-stu-id="781e8-373">The framework checks that the base URL is a parent of the current URL before establishing the circuit.</span></span> <span data-ttu-id="781e8-374">Il Framework non esegue alcun controllo aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="781e8-374">No additional checks are performed by the framework.</span></span>

<span data-ttu-id="781e8-375">Quando un utente seleziona un collegamento sul client, l'URL del collegamento viene inviato al server, che determina l'azione da eseguire.</span><span class="sxs-lookup"><span data-stu-id="781e8-375">When a user selects a link on the client, the URL for the link is sent to the server, which determines what action to take.</span></span> <span data-ttu-id="781e8-376">Ad esempio, l'app può eseguire una navigazione sul lato client o indicare al browser di passare alla nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="781e8-376">For example, the app may perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="781e8-377">I componenti possono inoltre attivare richieste di navigazione a livello tramite l' `NavigationManager`utilizzo di.</span><span class="sxs-lookup"><span data-stu-id="781e8-377">Components can also trigger navigation requests programatically through the use of `NavigationManager`.</span></span> <span data-ttu-id="781e8-378">In questi scenari, l'app può eseguire una navigazione sul lato client o indicare al browser di passare alla nuova posizione.</span><span class="sxs-lookup"><span data-stu-id="781e8-378">In such scenarios, the app might perform a client-side navigation or indicate to the browser to go to the new location.</span></span>

<span data-ttu-id="781e8-379">I componenti devono:</span><span class="sxs-lookup"><span data-stu-id="781e8-379">Components must:</span></span>

* <span data-ttu-id="781e8-380">Evitare di usare l'input dell'utente come parte degli argomenti della chiamata di navigazione.</span><span class="sxs-lookup"><span data-stu-id="781e8-380">Avoid using user input as part of the navigation call arguments.</span></span>
* <span data-ttu-id="781e8-381">Convalidare gli argomenti per assicurarsi che la destinazione sia consentita dall'app.</span><span class="sxs-lookup"><span data-stu-id="781e8-381">Validate arguments to ensure that the target is allowed by the app.</span></span>

<span data-ttu-id="781e8-382">In caso contrario, un utente malintenzionato può forzare il browser ad accedere a un sito controllato da un utente malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="781e8-382">Otherwise, a malicious user can force the browser to go to an attacker-controlled site.</span></span> <span data-ttu-id="781e8-383">In questo scenario l'utente malintenzionato fa in modo che l'app usi un input utente come parte della chiamata del `NavigationManager.Navigate` metodo.</span><span class="sxs-lookup"><span data-stu-id="781e8-383">In this scenario, the attacker tricks the app into using some user input as part of the invocation of the `NavigationManager.Navigate` method.</span></span>

<span data-ttu-id="781e8-384">Questo Consiglio si applica anche quando si esegue il rendering dei collegamenti come parte dell'app:</span><span class="sxs-lookup"><span data-stu-id="781e8-384">This advice also applies when rendering links as part of the app:</span></span>

* <span data-ttu-id="781e8-385">Se possibile, usare collegamenti relativi.</span><span class="sxs-lookup"><span data-stu-id="781e8-385">If possible, use relative links.</span></span>
* <span data-ttu-id="781e8-386">Verificare che le destinazioni di collegamento assolute siano valide prima di includerle in una pagina.</span><span class="sxs-lookup"><span data-stu-id="781e8-386">Validate that absolute link destinations are valid before including them in a page.</span></span>

<span data-ttu-id="781e8-387">Per altre informazioni, vedere <xref:security/preventing-open-redirects>.</span><span class="sxs-lookup"><span data-stu-id="781e8-387">For more information, see <xref:security/preventing-open-redirects>.</span></span>

## <a name="security-checklist"></a><span data-ttu-id="781e8-388">Elenco di controllo relativo alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="781e8-388">Security checklist</span></span>

<span data-ttu-id="781e8-389">Il seguente elenco di considerazioni sulla sicurezza non è completo:</span><span class="sxs-lookup"><span data-stu-id="781e8-389">The following list of security considerations isn't comprehensive:</span></span>

* <span data-ttu-id="781e8-390">Convalidare gli argomenti dagli eventi.</span><span class="sxs-lookup"><span data-stu-id="781e8-390">Validate arguments from events.</span></span>
* <span data-ttu-id="781e8-391">Convalidare gli input e i risultati dalle chiamate di interoperabilità JS.</span><span class="sxs-lookup"><span data-stu-id="781e8-391">Validate inputs and results from JS interop calls.</span></span>
* <span data-ttu-id="781e8-392">Evitare di usare (o convalidare in anticipo) l'input utente per le chiamate di interoperabilità da .NET a JS.</span><span class="sxs-lookup"><span data-stu-id="781e8-392">Avoid using (or validate beforehand) user input for .NET to JS interop calls.</span></span>
* <span data-ttu-id="781e8-393">Impedire al client di allocare una quantità di memoria non associata.</span><span class="sxs-lookup"><span data-stu-id="781e8-393">Prevent the client from allocating an unbound amount of memory.</span></span>
  * <span data-ttu-id="781e8-394">Dati all'interno del componente.</span><span class="sxs-lookup"><span data-stu-id="781e8-394">Data within the component.</span></span>
  * <span data-ttu-id="781e8-395">`DotNetObject`riferimenti restituiti al client.</span><span class="sxs-lookup"><span data-stu-id="781e8-395">`DotNetObject` references returned to the client.</span></span>
* <span data-ttu-id="781e8-396">Proteggersi da più invii.</span><span class="sxs-lookup"><span data-stu-id="781e8-396">Guard against multiple dispatches.</span></span>
* <span data-ttu-id="781e8-397">Annulla le operazioni a esecuzione prolungata quando il componente viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="781e8-397">Cancel long-running operations when the component is disposed.</span></span>
* <span data-ttu-id="781e8-398">Evitare eventi che producono grandi quantità di dati.</span><span class="sxs-lookup"><span data-stu-id="781e8-398">Avoid events that produce large amounts of data.</span></span>
* <span data-ttu-id="781e8-399">Evitare di usare l'input dell'utente come parte `NavigationManager.Navigate` delle chiamate a e convalidare l'input dell'utente per gli URL rispetto a un set di origini consentite prima se non è possibile evitare</span><span class="sxs-lookup"><span data-stu-id="781e8-399">Avoid using user input as part of calls to `NavigationManager.Navigate` and validate user input for URLs against a set of allowed origins first if unavoidable.</span></span>
* <span data-ttu-id="781e8-400">Non prendere decisioni di autorizzazione in base allo stato dell'interfaccia utente, ma solo dallo stato del componente.</span><span class="sxs-lookup"><span data-stu-id="781e8-400">Don't make authorization decisions based on the state of the UI but only from component state.</span></span>
* <span data-ttu-id="781e8-401">Prendere in considerazione l'uso dei [criteri di sicurezza del contenuto (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) per la protezione da attacchi XSS.</span><span class="sxs-lookup"><span data-stu-id="781e8-401">Consider using [Content Security Policy (CSP)](https://developer.mozilla.org/docs/Web/HTTP/CSP) to protect against XSS attacks.</span></span>
* <span data-ttu-id="781e8-402">Si consiglia di usare CSP e [X-frame-options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) per la protezione da clic-jacking.</span><span class="sxs-lookup"><span data-stu-id="781e8-402">Consider using CSP and [X-Frame-Options](https://developer.mozilla.org/docs/Web/HTTP/Headers/X-Frame-Options) to protect against click-jacking.</span></span>
* <span data-ttu-id="781e8-403">Verificare che le impostazioni CORS siano appropriate quando si Abilita CORS o disabilitare in Blazor modo esplicito CORS per le app.</span><span class="sxs-lookup"><span data-stu-id="781e8-403">Ensure CORS settings are appropriate when enabling CORS or explicitly disable CORS for Blazor apps.</span></span>
* <span data-ttu-id="781e8-404">Eseguire un test per assicurarsi che i limiti lato server per Blazor l'app forniscano un'esperienza utente accettabile senza livelli di rischio inaccettabili.</span><span class="sxs-lookup"><span data-stu-id="781e8-404">Test to ensure that the server-side limits for the Blazor app provide an acceptable user experience without unacceptable levels of risk.</span></span>
